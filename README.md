[![Build Status](https://travis-ci.org/peterpaints/bl.svg?branch=develop)](https://travis-ci.org/peterpaints/bl)
[![Coverage Status](https://coveralls.io/repos/github/peterpaints/bl/badge.svg?branch=develop)](https://coveralls.io/github/peterpaints/bl?branch=develop)
[![Code Climate](https://codeclimate.com/github/peterpaints/bl/badges/gpa.svg)](https://codeclimate.com/github/peterpaints/bl)
[![Issue Count](https://codeclimate.com/github/peterpaints/bl/badges/issue_count.svg)](https://codeclimate.com/github/peterpaints/bl)
# Create-A-Bucketlist

### Intro

This API will assist you in creating a bucketlist - that is, a to-do list of activities you
plan on crossing off before you, well ... kick the bucket.

### Dev Tools

The API has been developed using the following tools:
* [Python 3.6.1](https://www.python.org/)
* [Flask](http://flask.pocoo.org/)
* [Flask_Restplus](http://flask-restplus.readthedocs.io/en/stable/) (a Flask extension for creating Flask APIs, and which autogenerates Swagger UI documentation from your code's docstrings)
* [Postgresql](https://www.postgresql.org/)

### Installation

> Clone this repo to your local machine: Open terminal in any folder and type:
```
git clone https://github.com/peterpaints/bl.git
```

> Switch to the develop branch using:
```
git checkout develop
```

> Create a [virtualenv](http://docs.python-guide.org/en/latest/dev/virtualenvs/) on your machine and install the dependencies via:
```
pip install -r requirements.txt`
```

> Activate the virtualenv like so:
```
source virtualenv/bin/activate
```

> Export the following environment variables like so:
```
export FLASK_APP="run.py"
export SECRET="Type_in_some_random_sequence_of_characters_here"
export APP_SETTINGS="development"
export DATABASE_URL="postgresql://localhost/bl"
```

> Ensure you have postgresql installed and running on your machine, then create these two databases from your terminal like so:
```
createdb bl
createdb test
```

> Run the db migrations script:
```
python manage.py db init
python manage.py db migrate
python manage.py db upgrade
```

> Finally, start the app!
```
flask run
```

> You should see this in your terminal:
```
* Serving Flask app "run"
* Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
```

### The Endpoints

You can play around with the API by:
* Pasting the URL being served by the `flask run` command in your browser, and working with the beautifully autogenerated Swagger UI
* Using [`Postman`](https://www.getpostman.com/)
* Using [`Curl`](https://curl.haxx.se/)

Here are the endpoints:

| URL Endpoint | HTTP Methods | Action |
| -------- | ------------- | --------- |
| `api/v1/auth/register/` | `POST`  | Register a new user|
|  `api/v1/auth/login/` | `POST` | Log user in and receive access token|
| `api/v1/bucketlists/` | `POST` | Create a new bucketlist |
| `api/v1/bucketlists/` | `GET` | Retrieve all bucketlists belonging to a logged in user |
| `api/v1/bucketlists/?page=1&per_page=5/` | `GET` | Retrieve 5 bucketlists per page, and show only page 1 |
| `api/v1/bucketlists/?q=search_term` | `GET` | Search for a bucketlist with the specified search_term in its name|
| `api/v1/bucketlists/<id>` | `GET` |  Retrieve a bucketlist by ID|
| `api/v1/bucketlists/<id>` | `PUT` | Update a bucketlist |
| `api/v1/bucketlists/<id>` | `DELETE` | Delete a bucketlist |
| `api/v1/bucketlists/<id>/items` | `POST` |  Create an item in a bucketlist |
| `api/v1/bucketlists/<id>/items/<item_id>` | `PUT`| Update a bucketlist item |
| `api/v1/bucketlists/<id>/items/<item_id>` | `DELETE`| Delete an item from a bucketlist |

### Tests

Run tests and get a coverage report:
```
py.test --cov=api tests/
```

### License

[The MIT License](https://github.com/peterpaints/bl/blob/develop/LICENSE.md)
